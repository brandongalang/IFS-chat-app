# Mastra / OpenRouter
OPENROUTER_API_KEY=your-openrouter-api-key

# Supabase (required for persistence)
NEXT_PUBLIC_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# Optional Mastra client base URL (used by lib/mastra.ts if needed)
VITE_MASTRA_API_URL=http://localhost:4111

# Development mode (local only)
# Dev mode enables non-production features for local iteration.
# Controlled by NEXT_PUBLIC_IFS_DEV_MODE or NODE_ENV=development.
IFS_DEFAULT_USER_ID=00000000-0000-0000-0000-000000000000
IFS_VERBOSE=true
# Optional: enable Insights JIT top-up via GET /api/insights?jit=true
IFS_INSIGHTS_JIT=false
# Optional: workaround for dev runtime quirk when updating relationship polarization
IFS_DISABLE_POLARIZATION_UPDATE=true


# ----------------------------------------------------------------
# -- Subscription & Payment Configuration
# ----------------------------------------------------------------

# The full URL of your deployed site (e.g., https://myapp.vercel.app)
# Used for Stripe redirects and other absolute URLs.
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Stripe API keys
# Get these from your Stripe dashboard: https://dashboard.stripe.com/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=

# Stripe webhook secret
# Get this by creating a webhook endpoint in your Stripe dashboard.
# The endpoint URL should be `https://<your-site-url>/api/stripe/webhook`
STRIPE_WEBHOOK_SECRET=

# ----------------------------------------------------------------
# -- Feature Gating & Tiering Configuration
# ----------------------------------------------------------------

# Daily message limit for users on the free plan
FREE_TIER_DAILY_MESSAGE_LIMIT=15

# AI model to use for the paid/premium tier (from OpenRouter)
PAID_TIER_MODEL=z-ai/glm-4.5

# AI model to use for the free tier (from OpenRouter)
# Should be a cheaper, more economical model.
FREE_TIER_MODEL=mistralai/mistral-7b-instruct

# Test Persona System (dev mode only)
# Choose which synthetic user to test with: beginner|moderate|advanced
IFS_TEST_PERSONA=beginner
# Persona UUIDs (auto-generated by seed script):
# - beginner: 11111111-1111-1111-1111-111111111111 (Alex Beginner)
# - moderate: 22222222-2222-2222-2222-222222222222 (Jamie Moderate)
# - advanced: 33333333-3333-3333-3333-333333333333 (Riley Advanced)

# UI: whether to show the "Enable Dev Mode" toggle in the app header.
# Defaults to shown in development, hidden in production unless explicitly set to true.
NEXT_PUBLIC_IFS_SHOW_DEV_TOGGLE=false
# Controls dev mode globally (client + server). Prefer this over server-only flags.
NEXT_PUBLIC_IFS_DEV_MODE=false
