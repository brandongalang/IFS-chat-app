# Task ID: 12
# Title: Implement API Input Validation and Security
# Status: todo
# Dependencies: 11
# Priority: high
# Description: Secure all API endpoints with strict input validation and implement other security guardrails.
# Details:
Use Zod to define schemas for the request bodies of all API endpoints (`/api/chat`, `/api/sessions/*`, etc.). Enforce these schemas in the API routes to prevent invalid data. Implement rate limiting (e.g., 60 requests/minute) using a library like `upstash/ratelimit`. Ensure all database queries are parameterized to prevent SQL injection.

# Test Strategy:
Write API tests that send malformed or malicious payloads to each endpoint and verify that a 400 Bad Request error is returned. Test the rate limiter by sending a burst of requests and confirming a 429 error is received.
